function referralCheckout(){const t=new URLSearchParams(window.location.search).get("rfrlLnk"),e=document.getElementById("Product--Handle-Hidden").textContent,n=document.getElementById("Main--Products-Json-Hidden").textContent,o=document.getElementById("Shop--Permanent-Domain").textContent,a={shipping_interval_frequency:"30",shipping_interval_unit_type:"day"};if(!t)return!1;fetch(n).then(t=>t.json()).then(n=>{const i="checkout-sub"==t,c=n.find(t=>t.handle==e);c&&fetch("/cart/clear.js").then(t=>t.json()).then(()=>{const t={id:i?c.subId:c.otpId,quantity:1};i&&(t.properties=a);const e={items:[t]};fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(()=>{const t=(document.cookie.match("(^|; )cart=([^;]*)")||0)[2],e=`https://checkout.rechargeapps.com/r/checkout?domain=${o}&cart_token=${t}`,n=i?e:"/checkout";window.location.href=n})})})}document.addEventListener("DOMContentLoaded",function(){function t(){let t=document.querySelector(".primary-add-to-cart"),e=document.querySelector(".floating-add-to-cart-container");e&&(t.getBoundingClientRect().top>0?e.classList.add("hidden"):e.classList.remove("hidden"))}const e=$("#endorsements-slider .splide__list li").length,n=Math.round((e-1)/2),o=new Splide("#endorsements-slider",{rewind:!0,start:n||0,perMove:1,perPage:3,gap:20,breakpoints:{1200:{perPage:2},600:{perPage:1}},lazyLoad:"nearby"}).mount(window.splide.Extensions);var a,i=new Splide("#product-gallery-slider"),c=document.querySelectorAll(".js-thumbnails li"),s="is-active";for(let t=0,e=c.length;t<e;t++){var d=c[t];i.on("click",function(){i.go(t)},d)}i.on("mounted move",function(t){var e=c[void 0!==t?t:i.index];e&&a!==e&&(a&&a.classList.remove(s),e.classList.add(s),a=e)}),i.mount(),o.mount(),window.innerWidth<768&&window.addEventListener("scroll",t,!1),$("#add-item-form").submit(function(t){let e='select.data-quantity[data-quantity="1"]',n='select.data-quantity[data-quantity="2"]',o=$(`${e}`).val();$(`${n}`).val(o).trigger("change")}),$(document).on("mouseenter mouseleave",".d-flex .product-cross-sell__item",function(t){const e=$(this).data("image"),n=_product_main_image,o="mouseenter"==t.type?e:n;$("#_product_main_image").attr("src",o),i.go(0)}),referralCheckout(),$(document).on("click",".sub--save",function(){const t=$(this).data("target");$(t).modal("show")}),$(document).on("click",".sub--save-close",function(){const t=$(this).data("dismiss");$(t).modal("hide")})});const pathName=window.location.pathname,collectionsFormula="/collections/formula",toRedirect=["/collections/subscriptions/products/sport-formula-vitamin-capsules-1-ambassador-special","/products/free-sample-subscription-offer"];toRedirect.forEach((t,e)=>{t==pathName&&(window.location.href=collectionsFormula)});