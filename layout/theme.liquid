<!doctype html>
<html lang="{{ shop.locale }}">
<head>
  {% render 'pagefly-head' %}
  {% comment %}EasylockdownHeadBegin{% endcomment %}{% capture elhRender %}{% render 'easylockdown_head', easylockdownRender: true, easylockdownCustomPriceSelector: easylockdownCustomPriceSelector %}{% endcapture %}{% assign elhRender = elhRender | split: '--elhResults--'%}{{ elhRender[0] }}{% comment %}EasylockdownHeadEnd{% endcomment %}
  {% include 'wp_shopify_tracking' %}
  <meta name="facebook-domain-verification" content="ofx00trxg7giwx022sfl61x8a9cjfu"/>
  <link rel="dns-prefetch" href="//cdn.shopify.com">
  <link rel="preconnect" href="//cdn.shopify.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  {{ 'theme.min.css' | asset_url | stylesheet_tag: preload: true }}
  <script src="{{ 'jquery.js' | asset_url }}"></script>
  {% render 'wp_shopify_tracking' %}
  <title>
    {{ page_title -}}
    {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
    {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
    {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
  </title>

  {% if page_description %}
    <meta name="description" content="{{ page_description | escape }}"/>
  {% endif %}

  <link rel="canonical" href="{{ canonical_url }}"/>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="">
  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet"> 

  <link rel="alternate" hreflang="en" href="{{ shop.url }}"/>
  <link rel="shortcut icon" href="{{ 'favicon.ico' | asset_url }}">
  {{ 'custom-dev.css' | asset_url | stylesheet_tag }} 
  {{ 'custom-mobile.css' | asset_url | stylesheet_tag }} 
  {% comment %}
  {{ 'theme.css' | asset_url | stylesheet_tag }}
  {{ 'splide-sea-green.min.css' | asset_url | stylesheet_tag }}
  {{ 'accordion.css' | asset_url | stylesheet_tag }}
  {{ 'custom.css' | asset_url | stylesheet_tag }}

  <link rel="stylesheet"
  href="https://static.rechargecdn.com/static/css/rcWidget.css">
  {% endcomment %}

  {% render 'header-scripts.zipifypages', renderctx: 'thm' %}{{ content_for_header }}
  {{ content_for_header }}
  {% include 'pagefly-header' %}

  {% if template contains '20-percent-off-formula' or collection.handle == 'ambassador' %}
  <meta name="robots" content="noindex,nofollow">
  {% endif %}

  {%- comment -%}
    {% if template.suffix == 'get-in-touch' or template.suffix == 'subscribe_and_save' or template.suffix == 'shipping_returns' %}
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {% endif %}
  {%- endcomment -%}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">

  {{ 'splide-extension-video.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'splide-sea-green.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'accordion.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'custom.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'revamp.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'theme-unused.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'recharge-overwrites.min.css' | asset_url | stylesheet_tag: preload: true }}
  {{ 'rcWidget.css' | asset_url | stylesheet_tag: preload: true }}
  {%- if template.name == 'index' -%}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
  {%- endif -%}
</head>

<body data-template="{{ template.name }}" data-template-suffix="{{ template.suffix }}">
  {% section 'top-bar' %}
  {% section 'header' %}
  {% if template.name == 'index' %}
    {% section 'hero-banner-revamp' %}
  {% endif %}
  <script src="{{ 'lazysizes.min.js' | asset_url }}" async></script>
  <script src="{{ 'splide.min.js' | asset_url }}"></script>
  <script src="{{ 'splide-extension-video.min.js' | asset_url }}"></script>
  <script src="{{ 'theme.min.js' | asset_url }}"></script>

  {%- if template.name == 'index' -%}
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
  {%- endif -%}

  {% if template.name contains 'product' %}
    <script src="{{ 'product.min.js' | asset_url }}"></script>
  {% endif %}
  <script src="{{ 'shopify.min.js' | asset_url }}"></script>
  <script src="{{ 'bootstrap.bundle.js' | asset_url }}"></script>

  {% if template.name != 'index' %}
  	<script src="{{ 'rcWidget.min.js' | asset_url }}" defer></script>
    <script src="{{ 'recharge-overwrite.min.js' | asset_url }}" defer></script>
  	{%- comment -%}
  		<script src="https://static.rechargecdn.com/static/js/rcWidget.js"></script>
    	<script src="{{ 'recharge-overwrite.min.js' | asset_url }}"></script>
  	{%- endcomment -%}

    <!-- Stamped - Begin Script-->
    <script async type="text/javascript" data-api-key="" id="stamped-script-widget" src="https://cdn-stamped-io.azureedge.net/files/widget.min.js"></script>
    <!-- Stamped - End Script -->
  {% endif %}

  {%- comment -%}
    {% render 'subscription-theme-footer' %}
  {%- endcomment -%}
  <!-- <div style="max-width: 1440px; margin: auto;"> -->
    {% comment %}{{ content_for_layout }}{% endcomment %}{% render 'easylockdown_body', content_for_layout: content_for_layout, elhDefines: elhRender[1] %}
  <!-- </div> -->

  {% comment %}{{ 'bootstrap.bundle.js' | asset_url | script_tag }}{% endcomment %}
  {% comment %}{{ 'shopify.js' | asset_url | script_tag }}{% endcomment %}
  {% comment %}{{ 'splide.js' | asset_url | script_tag }}{% endcomment %}
  {% comment %}{{ 'cart.js' | asset_url | script_tag }}{% endcomment %}
  {% comment %}{{ 'theme.js' | asset_url | script_tag }}{% endcomment %}
  <a id="back-to-top" onclick="backToTop()">{% render 'icon-arrowup' %}Top</a>
  {% comment %}
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@splidejs/splide-extension-video@0.4.6/dist/css/splide-extension-video.min.css">
  {% endcomment %}

  {%- comment -%}
    {% section 'hero-footer' %}
    {% section 'footer' %}
  {%- endcomment -%}
  {% render 'page-footer.zipifypages', renderctx: 'thm', ocuapp: ocuapp %}
  {% include 'ambassador-special-portal' %}
  {% section 'custom-bogo' %}

  <script>
    window.sessionStorage.setItem('customerId','{{ customer.id }}')
  
    window.onload = function() {
      let redirectURL = "/account";
      let challengeURL = "/challenge";
      if (window.location.pathname === challengeURL) {
        // 1. create a new redirect input element
        let redirectInput = document.createElement('input');
        redirectInput.type = "hidden";
        redirectInput.name = "return_to";
        redirectInput.value = redirectURL;
        // 2. find the captcha element within the form
        let $recaptcha = document.getElementById('g-recaptcha');
        // 3. now add the redirect input within the form
        $recaptcha.parentNode.insertBefore(redirectInput, $recaptcha.nextSibling);
      }

      $.fn.hasAttr = function( name ) {
        const attr = this.attr( name )
        return typeof attr !== 'undefined' && attr !== false
      }

      const params = new URLSearchParams(window.location.search)
      const wistiaHashedId = params.get('whashedid')
    
      if ( wistiaHashedId ) {
        const offset = $( `iframe[src*="${wistiaHashedId}"]` ).offset()
        $( 'html, body' ).animate({
          scrollTop: offset.top - 50,
        }, 1000 )

        setTimeout( function() {
          const _body = $( 'body' )
          const _isProductPage = _body.hasAttr( 'data-template' )
          const _isTemplateProduct = _body.data( 'template' ) == 'product'

          if ( _isProductPage && _isTemplateProduct ) {
            const _matcher = `frme_${wistiaHashedId}`
            const _video = Wistia.api( `${_matcher}` )
            _video.play()

          } else {
            window._wq = window._wq || []
            _wq.push( { id: wistiaHashedId, onReady: function( video ) {
              video.play()
            } } )
          }
        }, 1500 )
      }
    }
    // Hotjar Tracking Code for my site
    (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:2984696,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>

  <script>
    ( function() {
      var wistia = document.querySelectorAll( ".wistia--lazyload" );

      for (var i = 0; i < wistia.length; i++) {
        var source = "https://embed-ssl.wistia.com/deliveries/"+ wistia[i].dataset.thumb;

        var image = new Image();
        image.src = source;
        image.setAttribute( 'width', '100%' )
        image.setAttribute( 'height', '100%' )
        image.addEventListener( "load", function() {
          wistia[ i ].appendChild( image );
        }( i ) );

        wistia[i].addEventListener( "click", function() {

        var iframe = document.createElement( "iframe" );
          iframe.setAttribute( "allow", "autoplay; fullscreen" );
          iframe.setAttribute( "allowtransparency", "true" );
          iframe.setAttribute( "frameborder", "0" );
          iframe.setAttribute( "allowfullscreen", "" );
          iframe.setAttribute( "mozallowfullscreen", "" );
          iframe.setAttribute( "webkitallowfullscreen", "" );
          iframe.setAttribute( "oallowfullscreen", "" );
          iframe.setAttribute( "msallowfullscreen", "" );
          iframe.setAttribute( "width", "100%" );
          iframe.setAttribute( "height", "100%" );
          iframe.setAttribute( "name", "wistia_embed" );
          iframe.setAttribute( "src", "//fast.wistia.net/embed/iframe/"+ this.dataset.embed +"?videoFoam=true&autoPlay=true&muted=false&controlsVisibleOnLoad=true" );

          this.innerHTML = "";
          this.appendChild( iframe );
        } );    
      };
    } )();
  </script>

</body>
</html>
